{% load static wagtailcore_tags %} 

{% block extra_css %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css">
{% endblock extra_css %}
{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.bundle.min.js"></script>
{% endblock extra_js %}
{% block content %}
<div class="content">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="search-result-box card-box">
                    <div class="row">
                        <div class="col-md-8 offset-md-2">
                            <div class="pt-3 pb-4">
                                <form action="{% url 'search' %}" method="get" class="input-group">
                                    <input type="text" class="form-control" placeholder="i.e: Cuenca" name="query" {% if search_query %} value="{{ search_query }}" {% endif %} />
                                    <div class="input-group-append">
                                        <input type="submit" value="Search" class="btn waves-effect waves-light btn-custom" />
                                    </div>
                                </form>
                                {% if search_query %}
                                <div class="mt-4 text-center">
                                    <h4>Search Results For "{{ search_query }}"</h4>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <!-- end row -->
                    {% if search_results %}
                    <ul class="nav nav-tabs tabs-bordered">
                        <li class="nav-item"><a href="#home" data-toggle="tab" aria-expanded="true" class="nav-link active">All results <span class="badge badge-success ml-1">{{ search_results.paginator.count }}</span></a></li>
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane active" id="home">
                            <div class="row">
                                <div class="col-md-12">
                                    {% for result in search_results %}
                                    <div class="search-item">
                                        <h4 class="mb-1"><a href="{% pageurl result %}">{{ result.title }}</a></h4>
                                        <div class="font-13 text-success mb-3">{{ result.get_url }}</div>
                                        {% if result.search_description %}
                                        <p class="mb-0 text-muted">{{ result.search_description }}</p>
                                        {% endif %}
                                    </div>
                                    {% endfor %}
                                    {% if search_results.has_previous or search_results.has_next %}
                                    <ul class="pagination justify-content-end pagination-split mt-0">
                                        {% if search_results.has_previous %}
                                        <li class="page-item"><a class="page-link" href="{% url 'search' %}?query={{ search_query|urlencode }}&amp;page={{ search_results.previous_page_number }}" aria-label="Previous"><span aria-hidden="true">«</span> <span class="sr-only">Previous</span></a></li>
                                        {% endif %}
                                        {% for num in search_results.paginator.page_range %}
                                        <li class="page-item{% if search_results.number == num %} active{% endif %}"><a class="page-link" href="{% url 'search' %}?query={{ search_query|urlencode }}&amp;page={{ num }}">{{ num }}</a></li>
                                        {% endfor %}
                                        {% if search_results.has_next %}
                                        <li class="page-item"><a class="page-link" href="{% url 'search' %}?query={{ search_query|urlencode }}&amp;page={{ search_results.next_page_number }}" aria-label="Next"><span aria-hidden="true">»</span> <span class="sr-only">Next</span></a></li>
                                        {% endif %}
                                    </ul>
                                    {% endif %}
                                    <div class="clearfix"></div>
                                </div>
                            </div>
                        </div>
                        <!-- end All results tab -->
                    </div>
                    {% else %}
                    {% if search_query %}No results found{% endif %}
                    {% endif %}
                </div>
            </div>
        </div>
        <!-- end row -->
    </div>
    <!-- container -->
</div>
{% endblock content %}