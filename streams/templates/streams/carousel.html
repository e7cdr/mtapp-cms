{% load static i18n dict_tags navbar_tags wagtailcore_tags wagtailimages_tags %}

<link rel="stylesheet" href="{% static 'css/carousel.css' %}" />
<section class="carousel-container">
 <div class="slider-wrapper">
  <div class="carousel-title">
    {% if block.value.carousel_subtitle %}
   <h2>{{ block.value.carousel_subtitle }}</h2>
   {% endif %}
   <h1>{{ block.value.carousel_title }}</h1>
   {% if block.value.search_bar == True %}
      <!--Search Bar -->
    {% include "search/search_bar.html" %}
    {% endif %}
  </div>

  <div class="slider">
  {% for item in block.value.slides %}
  <div class="slide-overlay-block">

    {# IMAGE SLIDE (unchanged) #}
      {% image item.image fill-1265x712 as img %}
      <img
        height=""
        width=""
        src="{{ img.url }}"
        alt="{{ item.caption|default:'Carousel image' }}"
        id="slide-{{ forloop.counter }}"
        loading="lazy"
      />

    {# Optional link (works on both image and video slides) #}
    {% if item.link %}
      <a href="{{ item.link.url }}" class="full-slide-link"></a>
    {% endif %}

    <div class="slide-overlay"></div>

    {# Optional caption overlay #}
    {% if item.caption %}
      <div class="slide-caption">{{ item.caption }}</div>
    {% endif %}
  </div>
  {% empty %}
   <div class="slide-overlay-block">
    <img src="{% static 'default_media/azuay.jpg' %}" alt="Default carousel image"
     id="slide-1"
     height=""
     width=""
     loading="lazy">
    <div class="slide-overlay"></div>
   </div>
  {% endfor %}
</div>

<div class="slider-nav nav-fade-in">
    {% for item in block.value.slides %}
    <a href="#slide-{{ forloop.counter }}" aria-label="swiper navigation"></a>
    {% empty %}
    <a href="#slide-1" aria-label="swiper navigation"></a>
    {% endfor %}
   </div>
 </div>
</section>

<script src="{% static 'js/carousel.js' %}"></script>