{% load static i18n dict_tags navbar_tags wagtailcore_tags wagtailimages_tags %}
{% block extra_css %}
<style>
  .fade-image, .fade-swiper-section .swiper {
    height: {{ self.height }}rem !important;
}
</style>
{% endblock extra_css %}
{% block content %}
<section class="fade-swiper-section">
<div class="fade-swiper-container swiper">
      <div class="fade-title">
    {% if self.fade_subtitle %}
   <h2>{{ self.fade_subtitle }}</h2>
   {% endif %}
   <h1>{{ self.fade_title }}</h1>
   {% if self.search_bar == True %}
      <!--Search Bar -->
    {% include "search/search_bar.html" %}
    {% endif %}
  </div>
    <div class="swiper-wrapper">
              {% for item in value.images %}
                  <div class="swiper-slide">
                {% if item.image %}
                {% image item.image fill-1920x1080 format-webp webpquality-60 fetchpriority="high" loading="lazy" alt="{{ item.caption }}" class="fade-image" %}
                   {% if item.link %}
                    <a href="{{ item.link.url }}"></a>
                {% endif %}
                <img
                height=""
                width=""
                src="{{ img.url }}"
                alt="{{ item.caption|default:'Swiper images' }}"
                id="slide-{{ forloop.counter }}"
                loading="lazy"
                />
            {% elif item.yt_vid %}
            <div class="youtube-lazy"
                data-video-id="{{ item.yt_vid }}" data-volume="50"
                style="position:absolute; inset:0; background:#000;">
                <div style="position:absolute; inset:0; background:url('https://i.ytimg.com/vi/{{ item.yt_vid }}/maxresdefault.jpg') center/cover no-repeat; filter:brightness(0.7);"></div>
                <div style="position:absolute; inset:0; display:flex; align-items:center; justify-content:center; pointer-events:none;">
                    <div style="width:100px; height:100px; background:rgba(255,255,255,0.2); backdrop-filter:blur(20px); border-radius:50%; border:4px solid rgba(255,255,255,0.4); box-shadow:0 20px 40px rgba(0,0,0,0.5);"></div>
                </div>
            </div>
            {% endif %}
            </div>
            <p class="caption">{{ item.caption }}</p>
            {% empty %}
            <p>No images or videos found. Please go to the admin panel to add them.</p>
            {% endfor %}
        {% comment %} {% for item in value.images %}
        <div class="swiper-slide">
            {% image item.image fill-1920x1080 format-webp webpquality-60 fetchpriority="high" loading="lazy" alt="{{ item.caption }}" class="fade-image" %}
            {% if item.link %}
            <a href="{{ item.link.url }}"></a>
            {% endif %}
            {% if item.caption %}
            <p class="caption">{{ item.caption }}</p>
            {% endif %}
        </div>
        {% endfor %} {% endcomment %}
    </div>
<div class="swiper-pagination"></div>
</div>
</section>
{% endblock content %}